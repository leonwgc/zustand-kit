"use strict";Object.defineProperty(exports, "__esModule", {value: true});var x=Object.defineProperty;var d=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var v=(t,e,o)=>e in t?x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,b=(t,e)=>{for(var o in e||(e={}))U.call(e,o)&&v(t,o,e[o]);if(d)for(var o of d(e))B.call(e,o)&&v(t,o,e[o]);return t};var _zustand = require('zustand');var _middleware = require('zustand/middleware');var _react = require('react');var a=new Map;function R(){a.clear()}function O(t,e,o){let{storage:r="none",storageKey:i="global-state",enableDevtools:s=process.env.NODE_ENV!=="production"}=o||{};if(!a.has(t)){let u=typeof e=="object"&&e!==null&&!Array.isArray(e),g=l=>({value:e,setValue:S=>{l(typeof S=="function"?f=>({value:S(f.value)}):u&&typeof S=="object"&&S!==null?f=>({value:b(b({},f.value),S)}):{value:S})},reset:()=>l({value:e})}),c;if(r!=="none"&&s){let l=r==="localStorage"?localStorage:sessionStorage;c=_zustand.create.call(void 0, )(_middleware.devtools.call(void 0, _middleware.persist.call(void 0, g,{name:`${i}-${t}`,storage:_middleware.createJSONStorage.call(void 0, ()=>l)}),{name:`GlobalState:${t}`}))}else if(r!=="none"){let l=r==="localStorage"?localStorage:sessionStorage;c=_zustand.create.call(void 0, )(_middleware.persist.call(void 0, g,{name:`${i}-${t}`,storage:_middleware.createJSONStorage.call(void 0, ()=>l)}))}else s?c=_zustand.create.call(void 0, )(_middleware.devtools.call(void 0, g,{name:`GlobalState:${t}`})):c=_zustand.create.call(void 0, g);a.set(t,c)}let n=a.get(t),h=n(u=>u.value),A=_react.useMemo.call(void 0, ()=>u=>n.getState().setValue(u),[n]),m=_react.useMemo.call(void 0, ()=>()=>n.getState().reset(),[n]);return[h,A,m]}function z(t,e,o=Object.is){let r=a.get(t);if(!r)throw new Error(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);if(o===Object.is)return r(n=>e(n.value));let i=_react.useMemo.call(void 0, ()=>n=>r.subscribe(n),[r]),s=_react.useMemo.call(void 0, ()=>()=>e(r.getState().value),[r,e]);return _react.useSyncExternalStore.call(void 0, i,s,s)}function C(t){let e=a.get(t);if(!e)throw new Error(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);return _react.useMemo.call(void 0, ()=>o=>e.getState().setValue(o),[e])}function K(t){let e=a.get(t);return e==null?void 0:e.getState().value}function M(t,e){let o=a.get(t);if(!o){process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);return}o.getState().setValue(e)}function P(t,e){let o=a.get(t);if(!o)return process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`),()=>{};let r=o.getState().value;return o.subscribe(i=>{let s=i.value;Object.is(s,r)||(e(s,r),r=s)})}function J(t){let e=a.get(t);if(!e){process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);return}e.getState().reset()}var q=O;exports.__clearAllStates__ = R; exports.default = q; exports.getGlobalState = K; exports.resetGlobalState = J; exports.setGlobalState = M; exports.subscribeGlobalState = P; exports.useGlobalSelector = z; exports.useGlobalSetter = C; exports.useGlobalState = O;
