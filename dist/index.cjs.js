"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { newObj[key] = obj[key]; } } } newObj.default = obj; return newObj; } }var O=Object.defineProperty,D=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var m=(e,t,o)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,g=(e,t)=>{for(var o in t||(t={}))j.call(t,o)&&m(e,o,t[o]);if(G)for(var o of G(t))N.call(t,o)&&m(e,o,t[o]);return e},B=(e,t)=>D(e,_(t));var _react = require('react'); var R = _interopRequireWildcard(_react);var _zustand = require('zustand');var _middleware = require('zustand/middleware');var _shallow = require('zustand/react/shallow');var s=new Map,p=process.env.NODE_ENV!=="production";function V(e){process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${e}" not found. Initialize it with useGlobalState first.`)}function Z(e){p=e}var u=null;function K(){return u||(u=_zustand.create.call(void 0, )(_middleware.devtools.call(void 0, ()=>({}),{name:"GlobalStates (All)"}))),u}function T(e,t){if(u){let o=u.getState();u.setState(B(g({},o),{[e]:t}))}}function q(){s.clear(),u=null}function M(e,t,o){let{storage:n="none",storageKey:i="global-state"}=o||{};if(!s.has(e)){let S=typeof t=="object"&&t!==null&&!Array.isArray(t),U=(c,P)=>{let h=a=>{c({value:a}),p&&T(e,a)};return{value:t,setValue:a=>{typeof a=="function"?c(v=>{let f=a(v.value);return p&&T(e,f),{value:f}}):S&&typeof a=="object"&&a!==null?c(v=>{let f=g(g({},v.value),a);return p&&T(e,f),{value:f}}):h(a)},reset:()=>{h(t)}}},d;if(n!=="none"){let c=n==="localStorage"?localStorage:sessionStorage;d=_zustand.create.call(void 0, )(_middleware.persist.call(void 0, U,{name:`${i}-${e}`,storage:_middleware.createJSONStorage.call(void 0, ()=>c)}))}else d=_zustand.create.call(void 0, U);s.set(e,d),p&&(K(),T(e,t))}let r=s.get(e),l=r(S=>S.value),A=_react.useMemo.call(void 0, ()=>S=>r.getState().setValue(S),[r]),E=_react.useMemo.call(void 0, ()=>()=>r.getState().reset(),[r]);return[l,A,E]}function ee(e,t,o){let n=s.get(e);if(!n)throw new Error(`Global state with key "${e}" not found. Initialize it with useGlobalState first.`);let i=_react.useRef.call(void 0, t);i.current=t;let r=_react.useCallback.call(void 0, l=>i.current(l.value),[]);if(o===void 0){let l=r(n.getState());return l!==null&&typeof l=="object"&&!R.isValidElement(l)?n(_shallow.useShallow.call(void 0, r)):n(r)}return n(o==="shallow"?_shallow.useShallow.call(void 0, r):r)}function te(e){let t=s.get(e);if(!t)throw new Error(`Global state with key "${e}" not found. Initialize it with useGlobalState first.`);return _react.useMemo.call(void 0, ()=>o=>t.getState().setValue(o),[t])}function oe(e){let t=s.get(e);return t==null?void 0:t.getState().value}function re(e,t){let o=s.get(e);if(!o){V(e);return}o.getState().setValue(t)}function ne(e,t){let o=s.get(e);if(!o)return V(e),()=>{};let n=o.getState().value;return o.subscribe(i=>{let r=i.value;Object.is(r,n)||(t(r,n),n=r)})}function se(e){let t=s.get(e);if(!t){V(e);return}t.getState().reset()}var ae=M;exports.__clearAllStates__ = q; exports.configureDevtools = Z; exports.default = ae; exports.getGlobalState = oe; exports.resetGlobalState = se; exports.setGlobalState = re; exports.subscribeGlobalState = ne; exports.useGlobalSelector = ee; exports.useGlobalSetter = te; exports.useGlobalState = M;
