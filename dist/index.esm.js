var G=Object.defineProperty;var b=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var d=(e,t,o)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,g=(e,t)=>{for(var o in t||(t={}))h.call(t,o)&&d(e,o,t[o]);if(b)for(var o of b(t))A.call(t,o)&&d(e,o,t[o]);return e};import{create as v}from"zustand";import{persist as x,createJSONStorage as U}from"zustand/middleware";import{useMemo as c,useSyncExternalStore as B}from"react";var s=new Map;function I(){s.clear()}function y(e,t,o){let{storage:r="none",storageKey:l="global-state"}=o||{};if(!s.has(e)){let S=typeof t=="object"&&t!==null&&!Array.isArray(t),f=n=>({value:t,setValue:i=>{n(typeof i=="function"?T=>({value:i(T.value)}):S&&typeof i=="object"&&i!==null?T=>({value:g(g({},T.value),i)}):{value:i})},reset:()=>n({value:t})}),p;if(r!=="none"){let n=r==="localStorage"?localStorage:sessionStorage;p=v()(x(f,{name:`${l}-${e}`,storage:U(()=>n)}))}else p=v(f);s.set(e,p)}let a=s.get(e),u=a(S=>S.value),w=c(()=>S=>a.getState().setValue(S),[a]),V=c(()=>()=>a.getState().reset(),[a]);return[u,w,V]}function R(e,t,o=Object.is){let r=s.get(e);if(!r)throw new Error(`Global state with key "${e}" not found. Initialize it with useGlobalState first.`);if(o===Object.is)return r(u=>t(u.value));let l=c(()=>u=>r.subscribe(u),[r]),a=c(()=>()=>t(r.getState().value),[r,t]);return B(l,a,a)}function z(e){let t=s.get(e);if(!t)throw new Error(`Global state with key "${e}" not found. Initialize it with useGlobalState first.`);return c(()=>o=>t.getState().setValue(o),[t])}function C(e){let t=s.get(e);return t==null?void 0:t.getState().value}function D(e,t){let o=s.get(e);if(!o){process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${e}" not found. Initialize it with useGlobalState first.`);return}o.getState().setValue(t)}function k(e,t){let o=s.get(e);if(!o)return process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${e}" not found. Initialize it with useGlobalState first.`),()=>{};let r=o.getState().value;return o.subscribe(l=>{let a=l.value;Object.is(a,r)||(t(a,r),r=a)})}function K(e){let t=s.get(e);if(!t){process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${e}" not found. Initialize it with useGlobalState first.`);return}t.getState().reset()}var M=y;export{I as __clearAllStates__,M as default,C as getGlobalState,K as resetGlobalState,D as setGlobalState,k as subscribeGlobalState,R as useGlobalSelector,z as useGlobalSetter,y as useGlobalState};
