var V=Object.defineProperty;var d=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var g=(t,e,o)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,T=(t,e)=>{for(var o in e||(e={}))x.call(e,o)&&g(t,o,e[o]);if(d)for(var o of d(e))h.call(e,o)&&g(t,o,e[o]);return t};import{create as f}from"zustand";import{persist as A,createJSONStorage as U}from"zustand/middleware";import{useMemo as v}from"react";var a=new Map;function B(t,e,o){let{storage:n="none",storageKey:l="global-state"}=o||{};if(!a.has(t)){let u=typeof e=="object"&&e!==null&&!Array.isArray(e),c=s=>({value:e,setValue:i=>{s(typeof i=="function"?p=>({value:i(p.value)}):u&&typeof i=="object"&&i!==null?p=>({value:T(T({},p.value),i)}):{value:i})},reset:()=>s({value:e})}),S;if(n!=="none"){let s=n==="localStorage"?localStorage:sessionStorage;S=f()(A(c,{name:`${l}-${t}`,storage:U(()=>s)}))}else S=f(c);a.set(t,S)}let r=a.get(t),w=r(u=>u.value),b=v(()=>r.getState().setValue,[r]),G=v(()=>r.getState().reset,[r]);return[w,b,G]}function R(t,e){let o=a.get(t);if(!o)throw new Error(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);return o(n=>e(n.value))}function $(t){let e=a.get(t);if(!e)throw new Error(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);return v(()=>e.getState().setValue,[e])}function I(t){let e=a.get(t);return e==null?void 0:e.getState().value}function P(t,e){let o=a.get(t);if(!o){process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);return}o.getState().setValue(e)}function z(t,e){let o=a.get(t);if(!o)return process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`),()=>{};let n=o.getState().value;return o.subscribe(l=>{let r=l.value;r!==n&&(e(r,n),n=r)})}function j(t){let e=a.get(t);if(!e){process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);return}e.getState().reset()}var D=B;export{D as default,I as getGlobalState,j as resetGlobalState,P as setGlobalState,z as subscribeGlobalState,R as useGlobalSelector,$ as useGlobalSetter,B as useGlobalState};
