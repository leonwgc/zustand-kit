var V=Object.defineProperty;var d=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var g=(t,e,o)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,p=(t,e)=>{for(var o in e||(e={}))x.call(e,o)&&g(t,o,e[o]);if(d)for(var o of d(e))h.call(e,o)&&g(t,o,e[o]);return t};import{create as f}from"zustand";import{persist as A,createJSONStorage as U}from"zustand/middleware";import{useMemo as v}from"react";var n=new Map;function B(t,e,o){let{storage:a="none",storageKey:l="global-state"}=o||{};if(!n.has(t)){let u=typeof e=="object"&&e!==null&&!Array.isArray(e),c=s=>({value:e,setValue:i=>{s(typeof i=="function"?T=>({value:i(T.value)}):u&&typeof i=="object"&&i!==null?T=>({value:p(p({},T.value),i)}):{value:i})},reset:()=>s({value:e})}),S;if(a!=="none"){let s=a==="localStorage"?localStorage:sessionStorage;S=f()(A(c,{name:`${l}-${t}`,storage:U(()=>s)}))}else S=f(c);n.set(t,S)}let r=n.get(t),w=r(u=>u.value),b=v(()=>r.getState().setValue,[r]),G=v(()=>r.getState().reset,[r]);return[w,b,G]}function $(t,e){let o=n.get(t);if(!o)throw new Error(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);return o(a=>e(a.value))}function I(t){let e=n.get(t);if(!e)throw new Error(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);return v(()=>e.getState().setValue,[e])}function z(t){let e=n.get(t);return e==null?void 0:e.getState().value}function P(t,e){let o=n.get(t);if(!o){process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);return}o.getState().setValue(e)}function j(t,e){let o=n.get(t);if(!o)return process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`),()=>{};let a=o.getState().value;return o.subscribe(l=>{let r=l.value;r!==a&&(e(r,a),a=r)})}function C(t){let e=n.get(t);if(!e){process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);return}e.getState().reset()}var D=B;export{D as default,z as getGlobalState,C as resetGlobalState,P as setGlobalState,j as subscribeGlobalState,$ as useGlobalSelector,I as useGlobalSetter,B as useGlobalState};
