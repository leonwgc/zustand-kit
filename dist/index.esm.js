var x=Object.defineProperty;var d=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var v=(t,e,o)=>e in t?x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,b=(t,e)=>{for(var o in e||(e={}))U.call(e,o)&&v(t,o,e[o]);if(d)for(var o of d(e))B.call(e,o)&&v(t,o,e[o]);return t};import{create as T}from"zustand";import{persist as w,createJSONStorage as G,devtools as V}from"zustand/middleware";import{useMemo as p,useSyncExternalStore as E}from"react";var a=new Map;function R(){a.clear()}function O(t,e,o){let{storage:r="none",storageKey:i="global-state",enableDevtools:s=process.env.NODE_ENV!=="production"}=o||{};if(!a.has(t)){let u=typeof e=="object"&&e!==null&&!Array.isArray(e),g=l=>({value:e,setValue:S=>{l(typeof S=="function"?f=>({value:S(f.value)}):u&&typeof S=="object"&&S!==null?f=>({value:b(b({},f.value),S)}):{value:S})},reset:()=>l({value:e})}),c;if(r!=="none"&&s){let l=r==="localStorage"?localStorage:sessionStorage;c=T()(V(w(g,{name:`${i}-${t}`,storage:G(()=>l)}),{name:`GlobalState:${t}`}))}else if(r!=="none"){let l=r==="localStorage"?localStorage:sessionStorage;c=T()(w(g,{name:`${i}-${t}`,storage:G(()=>l)}))}else s?c=T()(V(g,{name:`GlobalState:${t}`})):c=T(g);a.set(t,c)}let n=a.get(t),h=n(u=>u.value),A=p(()=>u=>n.getState().setValue(u),[n]),m=p(()=>()=>n.getState().reset(),[n]);return[h,A,m]}function z(t,e,o=Object.is){let r=a.get(t);if(!r)throw new Error(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);if(o===Object.is)return r(n=>e(n.value));let i=p(()=>n=>r.subscribe(n),[r]),s=p(()=>()=>e(r.getState().value),[r,e]);return E(i,s,s)}function C(t){let e=a.get(t);if(!e)throw new Error(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);return p(()=>o=>e.getState().setValue(o),[e])}function K(t){let e=a.get(t);return e==null?void 0:e.getState().value}function M(t,e){let o=a.get(t);if(!o){process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);return}o.getState().setValue(e)}function P(t,e){let o=a.get(t);if(!o)return process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`),()=>{};let r=o.getState().value;return o.subscribe(i=>{let s=i.value;Object.is(s,r)||(e(s,r),r=s)})}function J(t){let e=a.get(t);if(!e){process.env.NODE_ENV!=="production"&&console.warn(`Global state with key "${t}" not found. Initialize it with useGlobalState first.`);return}e.getState().reset()}var q=O;export{R as __clearAllStates__,q as default,K as getGlobalState,J as resetGlobalState,M as setGlobalState,P as subscribeGlobalState,z as useGlobalSelector,C as useGlobalSetter,O as useGlobalState};
